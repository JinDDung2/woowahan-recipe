<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: headerFragment"/>

  <style>

    h2 {
      text-align: center;
    }

    .wrapper {
      width: 33%;
      min-height: 450px;
      margin: auto;
      padding: 20px;
    }

    .button-container {
      margin-top: 50px;
      height: 50px;
      text-align: center;
    }

    .button {
      margin-left: auto;
      margin-right: auto;
    }
  </style>

  <script th:inline="javascript">
    function check_sellerName() {
      let sellerName = $('#sellerName').val();
      console.log(sellerName)
      if ([sellerName].trim().length === 0) {
        return;
      }
      $.ajax({
        url: "/api/v1/seller/check-account",
        method: "GET",
        data: {
          sellerName: sellerName
        },
        success: function (message) {
          if (message == "존재하지 않는 아이디입니다.") {
            alert(message)
          } else {
            alert("성공")
          }
        }
      })
    }

    function check_password() {
      let password = $('#password').val();
      let sellerName = $('#sellerName').val();
      console.log(password)
      if ([password].trim().length === 0) {
        return;
      }
      $.ajax({
        url: "/api/v1/seller/check-password",
        method: "GET",
        data: {
          sellerName: sellerName,
          password: password
        },
        success: function (message) {
          if (message == "비밀번호가 틀렸습니다.") {
            alert(message)

          } else {
            alert("성공")
          }
        }
      })
    }
  </script>

  <body>
<div th:replace="fragments/bodyHeader :: bodyHeaderFragment"/>
<div class="wrapper">
  <br><br><br>
  <h2>판매자 로그인</h2>

  <br>
  <form role="form" th:action="@{/seller/login}" th:object="${sellerLoginRequest}"
        onsubmit="return validateMyForm();"
        method="post">
    <div th:if="${#fields.hasGlobalErrors()}">
      <p class="field-error" th:each="err : ${#fields.hasGlobalErrors()}" th:text="${err}">글로벌 오류 메세지</p>
    </div>

    <div class="mb-3">
      <label th:for="sellerName" class="form-label">아이디</label>
      <input type="text" th:field="*{sellerName}" class="form-control" placeholder="아이디를 입력해주세요"
             th:errorclass="field-error">
      <button onclick="check_sellerName()">아디이 일치 확인</button>
      <div class="field-error" th:errors="*{sellerName}">아이디 오류</div>
    </div>
    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label">비밀번호</label>
      <input type="password" th:field="*{password}" class="form-control" id="exampleInputPassword1"
             placeholder="비밀번호를 입력해주세요"
             th:errorclass="field-error">
      <button onclick="check_password()">비밀번호 일치 확인</button>
      <div class="field-error" th:errors="*{password}">비밀번호 오류</div>
    </div>
    <div class="button-container">
      <div class="button">
        <button onclick="check_sellerName(); check_sellerName()" type="submit" class="btn btn-primary">로그인</button>
      </div>
    </div>

  </form>
  <br><br>
</div>
<div th:replace="fragments/footer :: footerFragment"/>
</body>
</html>
