<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{cart-main}">
<!--<head th:replace="fragments/header :: headerFragment"/>-->
<body>
<!--<div th:replace="fragments/bodyHeader :: bodyHeaderFragment"/>-->
<div layout:fragment="cart-main" class="container">
    <div>장바구니 페이지</div>
    <div>
        <table class="cart-table">
            <thead>
            <tr>
                <th scope="col">Check</th>
                <th scope="col">Image</th>
                <th scope="g-col-6">Name</th>
                <th scope="col">Price</th>
                <th scope="col">Delete</th>
            </tr>
            </thead>
            <tbody class="table-group-divider">
            <tr class="cartList" th:each="item : ${cartList}" >
                <td>
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" checked="checked">
                </td>
<!--                <td class=".individual_image_input" th:text="${item.getImagePath()}">상품 이미지 경로</td>-->
                <td class="individual_name_input" th:text="${item.name}">상품 이름</td>
                <td class="individual_cnt_input" th:text="${item.cnt}"></td>
                <td class=".individual_totalPrice_input" th:text="${item.price}">상품 가격</td>
                <td>
                    <button type="button" class="btn btn-danger" onclick="deleteItem()">삭제</button>
                    <th:block layout:fragment="script">
                        <script type="text/javascript" th:inline="javascript">
                            /*<![CDATA[*/
                            function deleteItem() {
                                const id = [[${item.id}]];
                                console.log(id);
                                 let confirm_message = confirm(id + "번 상품을 정말 삭제하시겠습니까?");

                                 if(confirm_message) {
                                     const formHtml = `
                                         <form id="deleteForm" action="/carts/${id}" method="post">
                                             <input type="hidden" id="id" name="id" value="${id}" />
                                         </form>
                                         `;
                                     const doc = new DOMParser().parseFromString(formHtml, 'text/html');
                                     const form = doc.body.firstChild;
                                     document.body.append(form);
                                     document.getElementById('deleteForm').submit();
                                 }
                            }
                            /*]]>*/
                        </script>
                    </th:block>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="result">
            <span class="totalPrice_span">0</span>
            <span class="totalCount_span">0</span>
            <span class="delivery_price">0</span>
            <span class="finalTotalPrice_span">0</span>
        </div>
    </div>
</div>
</body>
<!--<div th:replace="fragments/footer :: footerFragment"/>-->
</html>