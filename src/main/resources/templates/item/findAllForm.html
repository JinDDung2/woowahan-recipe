<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="fragments/header :: headerFragment"/>
<style>
  .container {
    display: flex;
    gap: 20px 1%;
    flex-wrap: wrap;
    justify-content: space-evenly;
  }
  .inner{
    width: 19%;
    margin-bottom: 50px;
  }
  img {
    width: 210px;
    height: 210px;
    object-fit: cover;
    align-content: center;
    border-radius: 5%;
  }
  /*검색창 */
  .search-wrapper {
    width: 100%;
    margin: 100px auto 0;
    text-align: center;
  }
  .item-search {
    position: relative;
    width: 500px;
    display: inline-block;
  }
  .item-search input {
    width: 100%;
    border: 1px solid #bbb;
    border-radius: 8px;
    padding: 10px 12px;
    font-size: 14px;
  }
  .item-search input:focus {
    outline: 1px solid gray;
  }
  .item-search img {
    position : absolute;
    width: 19px;
    height: 22px;
    top: 10px;
    right: 12px;
    margin: 0;
  }
</style>
<body>
  <script>
    function count(type)  {
      // 결과를 표시할 element
      const resultElement = document.getElementById('result');

      // 현재 화면에 표시된 값
      let number = resultElement.innerText;

      if(type === 'plus') {
        number = parseInt(number) + 1;
      }else if(type === 'minus')  {
        number = parseInt(number) - 1;
      }

      // 결과 출력
      resultElement.innerText = number;
    }
  </script>
  <div th:replace="fragments/bodyHeader :: bodyHeaderFragment"/>
  <!--상품 검색 창-->
<!--  <div sec:authorize="hasRole('SELLER')">-->
  <div class="search-wrapper">
    <div class="item-search">
      <form style="text-align: center; margin-bottom: 100px" th:action="@{/items/search}" method="get">
        <input type="text" name = "keyword" placeholder="상품 검색">
        <button style="border:none;" type="submit"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></button>
      </form>
    </div>
  </div>
<!--상품 목록 시작-->
  <div class="container">
  <tr th:each="item : ${items}">
    <div class="inner">
      <!--상품 이미지-->
      <div class="card" style="border: white">
        <a onclick="location.href='findForm.html'"
           th:onclick="|location.href='@{/items/{id}(id=${item.getId})}'|"
           style="border: white">
          <img th:src="${item.itemImagePath}" alt="이미지 준비중입니다."
          th:onerror="this.src='https://woowahan-recipe-s3-bucket.s3.ap-northeast-2.amazonaws.com/recipes/noimage.gif'">
          <!--상품 이름 & 상품 가격-->
          <div class="card-body">
            <p class="card-title" th:text="${item.getItemName()}">상품 이름</p>
            <h5 class="card-text" th:text="${item.getPrice()}+원">가격</h5>
          </div>
        </a>
      </div>

    </div>
  </tr>
  </div>
  <!-- pagination -->
  <div class="py-3 my-4">
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center">
        <!--이전 버튼-->
        <li class="page-item" th:classappend="${!items.hasPrevious()} ? 'disabled'">
          <a class="page-link" th:href="@{/items(page = ${nowPage - 2})}">Previous</a>
        </li>
        <!--페이지 번호 버튼-->
        <th:block th:each="page : ${#numbers.sequence(startPage, endPage)}">
          <li class="page-item" th:if="${page != nowPage}"><a class="page-link" th:href="@{/items(page = ${page - 1})}" th:text="${page}">1</a></li>
          <li class="page-item" th:if="${page == nowPage}"> <strong class="page-link" th:text="${page}" style="color: #93bf85;"></strong></li>
        </th:block>
        <!--다음 버튼-->
        <li class="page-item" th:classappend="${!items.hasNext()} ? 'disabled'">
          <a class="page-link" th:href="@{/items(page = ${nowPage})}">Next</a>
        </li>
      </ul>
    </nav>
  </div>
<br/>
<div th:replace="fragments/footer :: footerFragment"/>
</body>
</html>

